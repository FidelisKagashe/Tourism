{% extends 'base/base.html' %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block title %}{% trans "Reset Password" %} - {{ site_settings.site_name|default:"Safari & Bush Retreats" }}{% endblock %}

{% block extra_css %}
<style>
/* ------- Reset Password (Tailwind look, no Bootstrap) ------- */
.reset-page{
  --brand:#C18D45; --brand-600:#B07E3E; --muted:#6b7280;
  --bg-card:#ffffff; --bg-card-dark:#1f2937;
  --border:#e5e7eb; --border-dark:#374151;
  --text:#111827; --text-dark:#f3f4f6;
  --radius:16px; --shadow:0 10px 30px rgba(17,24,39,.08);
  font-family:'Poppins',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
}
.reset-page .card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);}
.dark .reset-page .card{background:var(--bg-card-dark);border-color:var(--border-dark);}

.reset-page .icon{width:56px;height:56px;border-radius:14px;display:grid;place-items:center;color:var(--brand);
  background: color-mix(in srgb, var(--brand) 12%, transparent);}
.reset-page h1{font-size:clamp(1.1rem,2.2vw,1.6rem);font-weight:800;color:var(--text);margin-top:.6rem;}
.dark .reset-page h1{color:var(--text-dark);}
.reset-page .lead{font-size:.95rem;color:var(--muted);}

.reset-page .info{display:flex;gap:.5rem;align-items:flex-start;font-size:.9rem;color:var(--brand-600);
  background: color-mix(in srgb, var(--brand) 10%, transparent);
  border:1px solid color-mix(in srgb, var(--brand) 25%, transparent);
  padding:.65rem .9rem;border-radius:12px;}

/* inputs */
.reset-page label{display:block;font-weight:700;margin-bottom:.35rem;color:var(--text);}
.dark .reset-page label{color:var(--text-dark);}

.reset-page input[type="email"]{
  width:100%;border-radius:12px;border:1px solid #d1d5db;background:#ffffff;color:#111827;
  padding:.65rem 1rem;font-size:.95rem;transition:border-color .15s, box-shadow .15s, background .15s, color .15s;
}
.dark .reset-page input[type="email"]{background:#111827;color:#e5e7eb;border-color:#4b5563;}
.reset-page input[type="email"]:focus{outline:none;border-color:var(--brand-600);
  box-shadow:0 0 0 2px color-mix(in srgb, var(--brand) 35%, transparent);}

/* invalid state */
.reset-page input[aria-invalid="true"]{border-color:#ef4444;box-shadow:0 0 0 2px rgba(239,68,68,.15);}
.dark .reset-page input[aria-invalid="true"]{border-color:#ef4444;}

.reset-page .invalid-feedback, .reset-page .errorlist{color:#ef4444;font-size:.85rem;margin-top:.25rem;}

/* button */
.reset-page .submit-btn{
  display:inline-flex;justify-content:center;align-items:center;width:100%;
  background:linear-gradient(180deg, var(--brand), var(--brand-600));
  color:#fff;font-weight:700;font-size:.98rem;border:none;border-radius:12px;
  padding:.72rem 1rem;cursor:pointer;box-shadow:0 8px 24px rgba(193,141,69,.22);
  transition:transform .06s ease, box-shadow .12s ease, opacity .08s ease;
}
.reset-page .submit-btn:hover{transform:translateY(-1px);}
.reset-page .submit-btn:active{transform:translateY(0);}
.reset-page .submit-btn:focus{outline:none;box-shadow:0 10px 30px rgba(193,141,69,.28);}

/* spacing */
.reset-page .space-y > * + *{margin-top:1rem;}
</style>
{% endblock %}

{% block content %}
<section class="reset-page py-10 md:py-16">
  <div class="container mx-auto px-4">
    <div class="mx-auto max-w-lg">
      <div class="card p-6 md:p-8">
        <!-- header -->
        <div class="text-center">
          <div class="icon mx-auto">
            <i class="fas fa-key text-2xl" aria-hidden="true"></i>
          </div>
          <h1>{% trans "Reset Password" %}</h1>
          <p class="lead">{% trans "Enter your email address and we'll send you a link to reset your password" %}</p>
        </div>

        <!-- info -->
        <div class="info mt-5">
          <i class="fas fa-info-circle mt-0.5" aria-hidden="true"></i>
          <span>{% trans "You will receive an email with instructions to reset your password." %}</span>
        </div>

        <!-- form -->
        <form method="post" class="mt-6 space-y" novalidate>
          {% csrf_token %}

          {# Non-field errors (e.g., general validation) #}
          {% if form.non_field_errors %}
            <div class="invalid-feedback">{{ form.non_field_errors|striptags }}</div>
          {% endif %}

          {# Render the email field manually for perfect a11y + invalid styling #}
          <div>
            <label for="{{ form.email.id_for_label }}">{% trans "Email address" %}</label>
            <input
              type="email"
              id="{{ form.email.id_for_label }}"
              name="{{ form.email.html_name }}"
              value="{{ form.email.value|default_if_none:'' }}"
              placeholder="you@example.com"
              autocomplete="email"
              required
              class=""
              aria-invalid="{% if form.email.errors %}true{% else %}false{% endif %}"
              aria-describedby="{% if form.email.errors %}email-error{% endif %}"
            />
            {% if form.email.errors %}
              <div id="email-error" class="invalid-feedback">{{ form.email.errors|striptags }}</div>
            {% endif %}
          </div>

          <button type="submit" class="submit-btn" aria-label="{% trans 'Send password reset link' %}">
            {% trans "Send reset link" %}
          </button>
        </form>

        <p class="text-center mt-6 text-sm text-gray-600 dark:text-gray-400">
          {% trans "Remember your password?" %}
          <a href="{% url 'accounts:login' %}" class="text-primary hover:underline">{% trans "Sign in here" %}</a>
        </p>
      </div>
    </div>
  </div>
</section>
{% endblock %}
